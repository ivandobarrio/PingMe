
<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="frontend.PantallaInicio"
            prefWidth="980" prefHeight="620"
            stylesheets="@registro.css">

    <top>
        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="root-panel">
            <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
            <Label text="PingMe" styleClass="brand"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="usuarioLabel" text="Usuario" styleClass="title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="logoutBtn" text="Cerrar sesión" onAction="#onLogout" styleClass="primary-btn"/>
            <Button text="Tickets" onAction="#onTickets" styleClass="primary-btn secondary-btn"/>
        </HBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.30">
            <VBox>
                <padding><Insets top="8" right="8" bottom="8" left="8"/></padding>
                <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                    <tabs>
                        <Tab text="Chats">
                            <content>
                                <ListView fx:id="chatsList"/>
                            </content>
                        </Tab>
                        <Tab text="Salas">
                            <content>
                                <VBox spacing="8">
                                    <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                                    <ListView fx:id="salasList" VBox.vgrow="ALWAYS"/>
                                    <HBox spacing="5">
                                        <Button text="+ Crear" onAction="#onCrearSala" HBox.hgrow="ALWAYS" maxWidth="Infinity" styleClass="primary-btn"/>
                                        <Button text="# Unirse" onAction="#onUnirseSala" HBox.hgrow="ALWAYS" maxWidth="Infinity" styleClass="secondary-btn"/>
                                    </HBox>
                                </VBox>
                            </content>
                        </Tab>
                    </tabs>
                </TabPane>
            </VBox>

            <BorderPane>
                <top>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
                        <Label fx:id="tituloConversacion" text="Selecciona un chat o sala" styleClass="field-label"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Historia de Sala" onAction="#onHistoriaSala" styleClass="secondary-btn"/>
                        <Button text="Info" onAction="#onInfoChat" styleClass="secondary-btn"/>
                    </HBox>
                </top>

                <center>
                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER">
                        <content>
                            <VBox fx:id="mensajesBox" spacing="8" fillWidth="true">
                                <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
                            </VBox>
                        </content>
                    </ScrollPane>
                </center>

                <bottom>
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
                        <TextField fx:id="mensajeField" promptText="Escribe un mensaje…" HBox.hgrow="ALWAYS"/>
                        <Button text="Adjuntar" onAction="#onAdjuntar" styleClass="secondary-btn"/>
                        <Button text="Enviar" onAction="#onEnviar" styleClass="primary-btn"/>
                    </HBox>
                </bottom>
            </BorderPane>
        </SplitPane>
    </center>

    <bottom>
        <HBox alignment="CENTER_LEFT">
            <padding><Insets top="4" right="10" bottom="6" left="10"/></padding>
            <Label fx:id="estadoLabel" text="Listo."/>
        </HBox>
    </bottom>
</BorderPane>
