
<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.pingme.ui.MainController"
            prefWidth="980" prefHeight="620"
            stylesheets="@registro.css">

    <!-- ===== TOP BAR ===== -->
    <top>
        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="root-panel">
            <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>

            <Label text="PingMe" styleClass="brand"/>
            <Region HBox.hgrow="ALWAYS"/>

            <!-- FP-Nombre de usuario -->
            <Label fx:id="usuarioLabel" text="FP-Nombre de usuario" styleClass="title"/>

            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="logoutBtn" text="Cerrar sesiÃ³n" onAction="#onLogout" styleClass="primary-btn"/>
            <Button fx:id="ticketsBtn" text="Tickets" onAction="#onTickets" styleClass="primary-btn secondary-btn"/>
        </HBox>
    </top>

    <!-- ===== CENTER: Split entre lista izquierda y chat derecho ===== -->
    <center>
        <SplitPane dividerPositions="0.30">
            <!-- Panel izquierdo: listas de Chats / Salas -->
            <VBox>
                <padding><Insets top="8" right="8" bottom="8" left="8"/></padding>
                <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                    <tabs>
                        <Tab text="Chats">
                            <content>
                                <ListView fx:id="chatsList">
                                    <items>
                                        <FXCollections fx:factory="observableArrayList">
                                            <String fx:value="Chat1-Persona 1"/>
                                            <String fx:value="Chat2-Persona 2"/>
                                            <String fx:value="Chat3-Persona 3"/>
                                            <String fx:value="Chat4-Persona 4"/>
                                            <String fx:value="Chat5-Persona 5"/>
                                        </FXCollections>
                                    </items>
                                </ListView>
                            </content>
                        </Tab>
                        <Tab text="Salas">
                            <content>
                                <ListView fx:id="salasList">
                                    <items>
                                        <FXCollections fx:factory="observableArrayList">
                                            <String fx:value="Sala1"/>
                                            <String fx:value="Sala2"/>
                                            <String fx:value="Sala3"/>
                                            <String fx:value="Sala4"/>
                                        </FXCollections>
                                    </items>
                                </ListView>
                            </content>
                        </Tab>
                    </tabs>
                </TabPane>
            </VBox>

            <!-- Panel derecho: conversaciÃ³n -->
            <BorderPane>
                <!-- Cabecera conversaciÃ³n -->
                <top>
                    <HBox alignment="CENTER_LEFT">
                        <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
                        <Label fx:id="tituloConversacion" text="Selecciona un chat o sala" styleClass="field-label"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Info" onAction="#onInfoChat" styleClass="secondary-btn"/>
                    </HBox>
                </top>

                <!-- Zona de mensajes -->
                <center>
                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER">
                        <content>
                            <VBox fx:id="mensajesBox" spacing="8" fillWidth="true">
                                <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
                                <HBox alignment="CENTER_LEFT">
                                    <Text text="ðŸ‘‹ Â¡Bienvenido a PingMe! Selecciona un chat para empezar."/>
                                </HBox>
                            </VBox>
                        </content>
                    </ScrollPane>
                </center>

                <!-- Barra de envÃ­o -->
                <bottom>
                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
                        <TextField fx:id="mensajeField" promptText="Escribe un mensajeâ€¦" HBox.hgrow="ALWAYS"/>
                        <Button fx:id="adjuntoBtn" text="Adjuntar" onAction="#onAdjuntar" styleClass="secondary-btn"/>
                        <Button fx:id="enviarBtn" text="Enviar" onAction="#onEnviar" styleClass="primary-btn"/>
                    </HBox>
                </bottom>
            </BorderPane>
        </SplitPane>
    </center>

    <!-- Barra inferior opcional -->
    <bottom>
        <HBox alignment="CENTER_LEFT">
            <padding><Insets top="4" right="10" bottom="6" left="10"/></padding>
            <Label fx:id="estadoLabel" text="Listo."/>
        </HBox>
    </bottom>
</BorderPane>
