
<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="frontend.AdminTicketsController"
            prefWidth="980" prefHeight="620"
            stylesheets="@styles.css">

    <!-- ===== Barra superior ===== -->
    <top>
        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="root-panel">
            <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>

            <Label text="PingMe" styleClass="brand"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="adminNombreLabel" text="FP-Nombre de admin" styleClass="title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="logoutBtn" text="Cerrar sesión" onAction="#onLogout" styleClass="primary-btn"/>
        </HBox>
    </top>

    <!-- ===== Centro: Split con lista de tickets y detalle ===== -->
    <center>
        <SplitPane dividerPositions="0.32">
            <!-- Columna izquierda: lista de tickets -->
            <VBox>
                <padding><Insets top="8" right="8" bottom="8" left="8"/></padding>

                <!-- Encabezado de la columna -->
                <Label text="Tickets" styleClass="field-label"/>

                <ListView fx:id="ticketsList" VBox.vgrow="ALWAYS">
                    <!-- Datos de ejemplo (puedes eliminarlos si cargas por código) -->
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Ticket #1012 • Alta"/>
                            <String fx:value="Ticket #1011 • Media"/>
                            <String fx:value="Ticket #1010 • Baja"/>
                            <String fx:value="Ticket #1009 • Alta"/>
                            <String fx:value="Ticket #1008 • Media"/>
                            <String fx:value="Ticket #1007 • Baja"/>
                            <String fx:value="Ticket #1006 • Alta"/>
                            <String fx:value="Ticket #1005 • Media"/>
                            <String fx:value="Ticket #1004 • Baja"/>
                            <String fx:value="Ticket #1003 • Alta"/>
                        </FXCollections>
                    </items>
                </ListView>
            </VBox>

            <!-- Panel derecho: detalle del ticket -->
            <BorderPane>
                <!-- Cabecera del detalle -->
                <top>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <padding><Insets top="10" right="12" bottom="8" left="12"/></padding>
                        <Label fx:id="ticketTituloLabel" text="Selecciona un ticket" styleClass="field-label"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="resolverBtn" text="Marcar como resuelto" onAction="#onResolver" styleClass="primary-btn"/>
                    </HBox>
                </top>

                <!-- Cuerpo del detalle -->
                <center>
                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER">
                        <content>
                            <VBox spacing="10" fillWidth="true">
                                <padding><Insets top="6" right="12" bottom="12" left="12"/></padding>

                                <GridPane hgap="10" vgap="10">
                                    <columnConstraints>
                                        <ColumnConstraints minWidth="120" prefWidth="140"/>
                                        <ColumnConstraints hgrow="ALWAYS"/>
                                    </columnConstraints>

                                    <Label text="ID:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                    <Label fx:id="ticketIdLabel" text="-" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                    <Label text="Asunto:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                    <Label fx:id="ticketAsuntoLabel" text="-" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                                    <Label text="Estado:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                    <ChoiceBox fx:id="estadoChoice" GridPane.rowIndex="2" GridPane.columnIndex="1">
                                        <items>
                                            <FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Abierto"/>
                                                <String fx:value="En progreso"/>
                                                <String fx:value="Resuelto"/>
                                                <String fx:value="Cerrado"/>
                                            </FXCollections>
                                        </items>
                                    </ChoiceBox>

                                    <Label text="Prioridad:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                    <ChoiceBox fx:id="prioridadChoice" GridPane.rowIndex="3" GridPane.columnIndex="1">
                                        <items>
                                            <FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Baja"/>
                                                <String fx:value="Media"/>
                                                <String fx:value="Alta"/>
                                                <String fx:value="Crítica"/>
                                            </FXCollections>
                                        </items>
                                    </ChoiceBox>

                                    <Label text="Descripción:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                    <TextArea fx:id="ticketDescripcionArea" GridPane.rowIndex="4" GridPane.columnIndex="1"
                                              prefRowCount="10" wrapText="true" editable="false"/>
                                </GridPane>
                            </VBox>
                        </content>
                    </ScrollPane>
                </center>

                <!-- Barra inferior del detalle (acciones) -->
                <bottom>
                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <padding><Insets top="8" right="12" bottom="10" left="12"/></padding>
                        <Button fx:id="guardarBtn" text="Guardar cambios" onAction="#onGuardar" styleClass="primary-btn"/>
                    </HBox>
                </bottom>
            </BorderPane>
        </SplitPane>
    </center>
</BorderPane>
